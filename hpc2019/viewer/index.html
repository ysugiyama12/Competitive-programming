<!--
HAL Programming Contest 2019 Viewer
Copyright (c) 2019 HAL Laboratory, Inc.
 -->
<!DOCTYPE html>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="initial-scale=1.0">
<link rel="stylesheet" href="style.css">
<title>viewer</title>
<div>
  <div>
    <input @change="import" @click="reset" type="file" class="import">
    <div>ここにファイルをドラッグ＆ドロップできます（IE非対応）</div>
  </div>
  <span v-show="json" v-text="'Total turn: '+totalTurn()"></span>
  <div class="control" v-show="json">
    <section class="stage">
      <h1>Stage</h1>
      <div class="stagebuttons">
        <button v-for="(i,s) in stages" :class="stage===i?'current':''" @click="stage=i" :style="{background:stageColor(i)}"></button>
      </div>
      <div>
        <button @click="stage=0" :disabled="isPlay||stage==0">&lt;&lt;</button>
        <button @click="stage--" :disabled="isPlay||stage==0">&lt;</button>
        <input v-model="stage" :disabled="isPlay" type="number"><span v-text="'/'+(stages.length-1)"></span>
        <button @click="stage++" :disabled="isPlay||stage>=stages.length-1">&gt;</button>
        <button @click="stage=stages.length-1" :disabled="isPlay||stage>=stages.length-1">&gt;&gt;</button>
      </div>
    </section>
    <section class="turn">
      <h1>Turn</h1>
      <div>
        <button @click="turn=0" :disabled="isPlay||turn==0">&lt;&lt;</button>
        <button @click="turn--" :disabled="isPlay||turn==0">&lt;</button>
        <input v-model="turn" :disabled="isPlay" type="number"><span v-text="'/'+(turns.length-1)"></span>
        <button @click="turn++" :disabled="isPlay||turn>=turns.length-1">&gt;</button>
        <button @click="turn=turns.length-1" :disabled="isPlay||turn>=turns.length-1">&gt;&gt;</button>
      </div>
      <div @mousedown="drag($event)" id="slider">
        <div></div>
        <div @mouseup="isDrag=false" @mousemove="drag($event)" v-show="isDrag" class="mask"></div>
      </div>
    </section>
    <section class="play">
      <h1>Play</h1>
      <div>
        <button @click="isPlay=!isPlay" v-text="isPlay?'停止':'再生'"></button>
        <label><input v-model="playType" type="radio" value="0">通常再生</label>
        <label><input v-model="playType" type="radio" value="1">繰り返し</label>
        <label><input v-model="playType" type="radio" value="2">連続再生</label>
      </div>
    </section>
  </div>
  <div class="field" v-show="json" :style="fieldStyle()">
    <div
      class="food" v-for="(i,f) in nowFoods()" :style="foodStyle(f)"
      :data-height="f.height">
      <pre>エサNo {{f.no}}</pre>
    </div>
    <div
      class="turtle" v-for="(i,t) in overlapTurtles()" :style="turtleStyle(t)"
      :data-count="t.nos.length">
      <pre style="text-align: right">カメNo {{'\n' + t.nos.join('\n')}}</pre>
    </div>
  </div>
</div>
<script src="vue.min.js"></script>
<script src="main.js"></script>
